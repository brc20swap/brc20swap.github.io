System.register(["./index-legacy-80dad488.js","./feeRate-legacy-19a6074f.js","./index-legacy-3a727e91.js"],(function(e,t){"use strict";var a,n,l,o,s,r,i,c,p,d,b,m,u,x,f,v,g,y,h,k,w,F,B,$,C,_,j,T,I,E,z,U,A,R,N,S,V,q,D,H,W,G,J,K;return{setters:[e=>{a=e.j,n=e.ag,l=e.af,o=e.aO,s=e.a,r=e.l,i=e.w,c=e.aX,p=e.ah,d=e.ai,b=e.C,m=e.aj,u=e.ak,x=e.al,f=e.b3,v=e.ay,g=e.aC,y=e.aI,h=e.an,k=e.aq,w=e.a8,F=e.ap,B=e.am,$=e.ao,C=e.ax,_=e.au,j=e.a4,T=e.a5,I=e.aw,E=e.as,z=e.aB,U=e.aF,A=e.ac,R=e.aH,N=e.aG,S=e.aJ,V=e.aK,q=e.aU,D=e.ae,H=e.aL},e=>{W=e.A,G=e.F},e=>{J=e.R,K=e.a}],execute:function(){var t=document.createElement("style");t.textContent=".page-container[data-v-74b980bb]{--van-nav-bar-background-color: #fff;--van-nav-bar-arrow-size: .53333rem;--van-nav-bar-title-text-color: #333333;--van-nav-bar-icon-color: #999;background:#F8F8F8}.page-container .page-content[data-v-74b980bb]{background:#fff;padding:.26667rem .42667rem}.page-container .page-content .tabs[data-v-74b980bb]{background:#F5F6F7;border-radius:.10667rem;display:flex;padding:.08rem}.page-container .page-content .tabs .tab-item[data-v-74b980bb]{flex:1;background:transparent;border-radius:.10667rem;padding:.21333rem 0;font-size:.37333rem;color:#999;text-align:center}.page-container .page-content .tabs .tab-item.active[data-v-74b980bb]{background:#FFFFFF;font-size:.37333rem;color:#333;font-weight:500}.page-container .page-content .input-box[data-v-74b980bb]{border:.02667rem solid #EBEBEB;border-radius:.10667rem}.page-container .page-content .input-box[data-v-74b980bb] .van-field__label{display:flex}.page-container .page-content .submit-btn[data-v-74b980bb]{height:1.06667rem;border-radius:.16rem;margin-top:1.33333rem}.page-container .page-content .btn-max[data-v-74b980bb]{font-size:.37333rem;color:#3f80f7;font-weight:400;border:none}.page-container .page-content .btn-max[data-v-74b980bb]:disabled{opacity:.5}.pop-content[data-v-74b980bb]{padding:0 .42667rem .8rem}.pop-content .fee-form[data-v-74b980bb]{display:flex;justify-content:space-between;align-items:stretch;font-size:.32rem;color:#999;letter-spacing:0;font-weight:400}.pop-content .fee-form .fee-item[data-v-74b980bb]{border:.02667rem solid #EBEBEB;border-radius:.10667rem;display:flex;flex-direction:column;align-items:center;width:calc(25vw - .4rem);padding:.26667rem 0}.pop-content .fee-form .fee-item.input-fee[data-v-74b980bb]{flex:none}.pop-content .fee-form .fee-item.input-fee[data-v-74b980bb] .van-field__value{display:flex;align-items:center}.pop-content .fee-form .fee-item.input-fee[data-v-74b980bb]:focus-within{border:.02667rem solid #558BED}.pop-content .fee-form .fee-item.active[data-v-74b980bb]{background:#F2F7FF;border:.02667rem solid #558BED}.pop-content .buy-btn[data-v-74b980bb]{height:1.06667rem;border-radius:.10667rem;margin-top:1.33333rem}.radio-group[data-v-74b980bb]{--van-radio-size: .37333rem}.radio-btn[data-v-74b980bb]{border:.02667rem solid #ddd;border-radius:.13333rem;width:calc(33% - .21333rem);padding:.26667rem 0 .13333rem;position:relative;margin:.10667rem}.radio-btn[data-v-74b980bb]:disabled{opacity:.5;background-color:#eee}.radio-btn .radio-icon[data-v-74b980bb]{position:absolute;right:.26667rem;top:.26667rem}.form-container[data-v-74b980bb]{padding-top:.53333rem;padding-bottom:.8rem;min-height:calc(100vh - .8rem);display:flex;flex-direction:column}\n",document.head.appendChild(t);const L=e=>(S("data-v-74b980bb"),e=e(),V(),e),M={class:"page-container"},O={class:"page-content"},X={class:"text-center text-24px"},P={class:"text-center color-#999 mt-6px mb-20px"},Q={class:"flex items-stretch flex-wrap ml--5px mr--5px"},Y=["onClick"],Z={class:"text-14px m-3px"},ee=["disabled","onClick"],te={class:"flex items-center justify-between w-100% pl-5px pr-5px mb-5px"},ae={class:"text-12px color-#999"},ne={key:1,class:"text-10px color-#333"},le={class:"text-12px color-#999 pt-5px w-100% border-t-1px mt-10px"},oe=["disabled","onClick"],se={class:"flex items-center justify-between w-100% pl-5px pr-5px mb-5px"},re={class:"text-12px color-#999"},ie={key:1,class:"text-10px color-#333"},ce={class:"text-12px color-#999 pt-5px w-100% border-t-1px mt-10px"},pe={class:"flex justify-center color-#3F80F7 text-12px mt-5px"},de=["onClick"],be={class:"mr-2px"},me=["onClick"],ue={class:"mr-2px"},xe={class:"mb-5px mt-20px"},fe=L((()=>d("div",{class:"mb-5px mt-20px"},"Fee Rate",-1))),ve=L((()=>d("div",{class:"flex-1"},null,-1))),ge={key:0,class:"text-12px color-#999 flex items-center justify-center mt-10px"},ye={class:"mr-2px"},he=["onClick"],ke={key:1,class:"flex items-center justify-between text-12px mt-10px"},we={class:"color-#999"},Fe={class:"color-#333"},Be={class:"flex items-center justify-between text-12px mt-10px"},$e={class:"color-#999"},Ce=L((()=>d("span",{class:"flex-1"},null,-1))),_e={class:"color-#333"},je={class:"text-14px color-#333 flex flex-col items-center pt-30px pb-30px pl-16px pr-16px"},Te={class:"mt-10px text-15px font-500"},Ie={class:"mt-10px text-12px color-#999"},Ee={class:"mt-10px text-14px color-#999 flex items-center justify-between w-100% mb-20px"},ze={class:"mr-5px"},Ue={class:"text-14px color-#333 flex flex-col items-center pt-30px pb-30px pl-16px pr-16px"},Ae={class:"mt-10px text-15px font-500"},Re={class:"mt-10px text-14px color-#999 flex items-center justify-between w-100% mb-20px"},Ne={class:"mr-5px"};e("default",H(a({__name:"transfer",setup(e){const t=n(),{t:a}=l(),S=o();let V=s(""),H=s(S.query.tick||""),L=s(S.query.toAddress||""),Se=s({}),Ve=null;function qe(){H.value&&q(H.value).then((e=>{console.log(e),Se.value=e,Ve&&(clearTimeout(Ve),Ve=null),Ve=setTimeout((()=>{qe()}),3e5)}))}let De=s(""),He=s(!1),We=s(!1),Ge=s(5);function Je(){We.value=!We.value}let Ke=r((()=>t?.brc20Balance?.transferableInscriptions||[])),Le=r((()=>(Ke.value||[]).find((e=>De.value===e.inscriptionId))));i(H,(e=>{4===e.length&&(De.value="",Oe(),qe())}),{immediate:!0});let Me=null;function Oe(){H.value&&4===H.value.length&&(t.walletAddress?t.getBrc20Balance(H.value).then((e=>{Me&&(clearTimeout(Me),Me=null),Me=setTimeout((()=>{Oe()}),12e4)})):setTimeout((()=>{Oe()}),3e3))}let Xe=s(!1),Pe=s("");function Qe(){t.checkWallet()&&t?.provider?.inscribeTransfer(H.value).then((e=>{console.log(e),"string"==typeof e?(Pe.value=e,Xe.value=!0):z({message:a("transferSubmitted"),type:"success"}),setTimeout((()=>{Oe()}),2e3)})).catch((e=>{console.log(e),g(e)}))}let Ye=s(!1),Ze=s("");function et(){t.checkWallet()&&L.value&&(He.value=!0,t?.provider?.sendInscription(L.value,De.value,{feeRate:Number(V.value||t.fees.hourFee||void 0)}).then((e=>{console.log(e),e&&(Ze.value=e.txid,f("app_open_tx_detail",{amount:new v(Le.value?.data?.amt||0).toFixed(0),from:t.walletAddress,to:L.value,symbol:Se.value?.token?.symbol||H,transactionHash:e.txid}),Ye.value=!0,setTimeout((()=>{De.value="",Oe()}),2e3)),He.value=!1})).catch((e=>{console.log(e),He.value=!1,g(e)})))}function tt(e){(e||Ze.value)&&U(`https://mempool.space/tx/${e||Ze.value}`)}function at(){t.getFees().then((e=>{V.value=t.fees.halfHourFee||""}))}return c((()=>{at()})),(e,a)=>{const n=A,l=J,o=K,s=R,r=D,i=N,c=y,f=W;return h(),p("div",M,[d("div",O,[b(c,{class:"form-container text-14px color-#333 font-400",onSubmit:et},{default:m((()=>[d("div",X,k(u(Le)?.data?.amt||0)+" "+k(u(Se)?.token?.symbol||u(H)),1),d("div",P,k(e.$t("transferableBalance"))+": "+k(u(t).brc20Balance.transferableBalance)+" "+k(u(H)),1),b(o,{class:"radio-group mb-10px",modelValue:u(De),"onUpdate:modelValue":a[0]||(a[0]=e=>x(De)?De.value=e:De=e)},{default:m((()=>[d("div",Q,[d("button",{class:"flex flex-wrap items-center justify-center radio-btn clickable p-5px color-#999 min-h-80px important-p-5px",style:w({"min-width":0===(u(Ke)||[]).length?"calc(99% - 8px)":""}),type:"button",onClick:F(Qe,["stop"])},[b(n,{name:"plus",size:"1.5em"}),d("span",Z,k(e.$t("inscribeTransfer")),1)],12,Y),(h(!0),p(B,null,$((u(Ke)||[]).slice(0,u(Ge)),((t,a)=>(h(),p("button",{class:"flex flex-col items-center radio-btn",type:"button",disabled:t.confirmations<3,key:a,onClick:F((e=>x(De)?De.value=t.inscriptionId:De=t.inscriptionId),["stop"])},[d("div",te,[d("span",ae,k(u(Se)?.token?.symbol||u(H)),1),t.confirmations>=3?(h(),C(l,{key:0,disabled:t.confirmations<3,name:t.inscriptionId},null,8,["disabled","name"])):(h(),p("span",ne,k(e.$t("unconfirmed")),1))]),d("span",null,k(u(_)(t.data.amt)),1),d("span",le,k(`#${t.inscriptionNumber}`),1)],8,ee)))),128)),(h(!0),p(B,null,$((u(Ke)||[]).slice(u(Ge)),((t,a)=>j((h(),p("button",{class:"flex flex-col items-center radio-btn",type:"button",disabled:t.confirmations<3,key:a,onClick:F((e=>x(De)?De.value=t.inscriptionId:De=t.inscriptionId),["stop"])},[d("div",se,[d("span",re,k(u(Se)?.token?.symbol||u(H)),1),t.confirmations>=3?(h(),C(l,{key:0,disabled:t.confirmations<3,name:t.inscriptionId},null,8,["disabled","name"])):(h(),p("span",ie,k(e.$t("unconfirmed")),1))]),d("span",null,k(u(_)(t.data.amt)),1),d("span",ce,k(`#${t.inscriptionNumber}`),1)],8,oe)),[[T,u(We)]]))),128))]),j(d("div",pe,[j(d("button",{class:"flex items-center",onClick:F(Je,["stop"]),type:"button"},[d("span",be,k(e.$t("expandMore")),1),I(),b(n,{name:"arrow-down"})],8,de),[[T,!u(We)]]),j(d("button",{class:"flex items-center",onClick:F(Je,["stop"]),type:"button"},[d("span",ue,k(e.$t("fold")),1),I(),b(n,{name:"arrow-up"})],8,me),[[T,u(We)]])],512),[[T,(u(Ke)||[]).length>u(Ge)]])])),_:1},8,["modelValue"]),d("div",xe,k(e.$t("receiptAddress")),1),b(s,{class:"input-box",name:"toAddress",modelValue:u(L),"onUpdate:modelValue":a[1]||(a[1]=e=>x(L)?L.value=e:L=e),placeholder:e.$t("receiptAddress"),clearable:"",border:!1,rules:[{required:!0,message:e.$t("cannotBeEmpty")}]},null,8,["modelValue","placeholder","rules"]),fe,b(G,{feeRate:u(V),"onUpdate:feeRate":a[2]||(a[2]=e=>x(V)?V.value=e:V=e)},null,8,["feeRate"]),ve,0===Number(u(t).brc20Balance.transferableBalance)?(h(),p("div",ge,[d("span",ye,k(e.$t("transferTips")),1),d("button",{class:"color-#3F80F7 clickable",type:"button",onClick:F(Qe,["stop"])},k(e.$t("inscribeTransfer1")),9,he)])):(h(),p("div",ke,[d("span",we,k(e.$t("availableBalance")),1),d("span",Fe,k(u(t).brc20Balance.availableBalanceSafe)+" "+k(u(H)),1)])),j(d("div",Be,[d("span",$e,k(e.$t("unsafeBalance")),1),Ce,d("span",_e,k(u(t).brc20Balance.transferableBalanceUnconfirmed)+" "+k(u(H)),1),0!==Number(u(t).brc20Balance.transferableBalanceUnconfirmed)?(h(),C(r,{key:0,class:"ml-5px",size:"0.4rem",color:"#3F80F7"})):E("",!0)],512),[[T,Number(u(t).brc20Balance.transferableBalanceUnconfirmed)>0]]),b(i,{class:"submit-btn important-mt-20px",block:"",type:"primary","native-type":"submit",loading:u(He),disabled:!u(De)||!u(Le)||!u(L),"loading-text":e.$t("confirm")},{default:m((()=>[I(k(e.$t("confirm")),1)])),_:1},8,["loading","disabled","loading-text"])])),_:1})]),b(f,{show:u(Ye),"onUpdate:show":a[5]||(a[5]=e=>x(Ye)?Ye.value=e:Ye=e),title:" "},{default:m((()=>[d("div",je,[b(n,{size:"3.4em",color:"#12B886",name:"checked"}),d("div",Te,k(e.$t("success")),1),d("div",Ie,k(e.$t("transferSubmitted")),1),d("div",Ee,[d("span",ze,k(e.$t("txId")),1),d("button",{class:"color-#558BED clickable van-multi-ellipsis--l2 flex-1",onClick:a[3]||(a[3]=F((e=>tt(u(Ze))),["stop"]))},k(u(Ze)?u(Ze)?.slice?.(0,5)+"..."+u(Ze)?.slice?.(-5):""),1)]),b(i,{color:"#3F80F7",block:"",class:"max-h-40px",onClick:a[4]||(a[4]=F((e=>tt(u(Ze))),["stop"]))},{default:m((()=>[I(k(e.$t("viewTx")),1)])),_:1})])])),_:1},8,["show"]),b(f,{show:u(Xe),"onUpdate:show":a[8]||(a[8]=e=>x(Xe)?Xe.value=e:Xe=e),title:" "},{default:m((()=>[d("div",Ue,[b(n,{size:"3.4em",color:"#12B886",name:"checked"}),d("div",Ae,k(e.$t("inscribeTransferSubmitted1")),1),d("div",Re,[d("span",Ne,k(e.$t("txId")),1),d("button",{class:"color-#558BED clickable van-multi-ellipsis--l2 flex-1",onClick:a[6]||(a[6]=F((e=>tt(u(Pe))),["stop"]))},k(u(Pe)?u(Pe)?.slice?.(0,5)+"..."+u(Pe)?.slice?.(-5):""),1)]),b(i,{color:"#3F80F7",block:"",class:"max-h-40px",onClick:a[7]||(a[7]=F((e=>tt(u(Pe))),["stop"]))},{default:m((()=>[I(k(e.$t("viewTx")),1)])),_:1})])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-74b980bb"]]))}}}));
